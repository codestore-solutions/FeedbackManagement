<div>
    <mat-card class="card">
        <mat-card-header>
            <mat-card-title>
                {{data.feedbackId}}
            </mat-card-title>
            <mat-card-subtitle>
                {{data.feedbackCreationDate | date:'medium'}}
            </mat-card-subtitle>
        </mat-card-header>
        <mat-divider></mat-divider>
        <br>
        <mat-card-content>
            <div>
                <sup><b>Rating:</b></sup>
                &NonBreakingSpace;
                <span *ngFor="let star of Arr(data.rating)">
                    <img src="../../../assets/star.png" alt="star">
                </span>
                &NonBreakingSpace;
                <span>({{data.rating}})</span>
            </div>
            <div>
                <sup><b>Comment:</b></sup>
                <div class="comment-wrapper">
                    {{data.comment.length ? data.comment : "N/A"}}
                </div>
            </div>
            <br>
            <div class="detailing-wrapper">
                <div class="user-wrapper">
                    <div *ngIf="fetchingUser">
                        <mat-spinner></mat-spinner>
                    </div>
                    <div *ngIf="!fetchingUser">
                        <b>User</b>
                        &NonBreakingSpace;
                        <small class="grey">({{data.userId}})</small>
                        <mat-divider></mat-divider>
                        <p>{{user.name}}</p>
                        <small>{{user.email}}</small>
                    </div>
                </div>

                <div class="product-wrapper">
                    <div *ngIf="fetchingProduct">
                        <mat-spinner></mat-spinner>
                    </div>
                    <div *ngIf="!fetchingProduct">
                        <b>Product</b>
                        &NonBreakingSpace;
                        <small class="grey">({{data.productId}})</small>
                        <mat-divider></mat-divider>
                        <p>{{product.description}}</p>
                        <small>(Avg. Rating {{product.avg_rating}})</small>
                    </div>
                </div>
            </div>
    
            <br>
            <mat-divider></mat-divider>
            <br>
            
            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Reply to the feedback:</mat-label>
                <textarea matInput [(ngModel)]="response" [disabled]="responseAvailable"></textarea>
            </mat-form-field>
        </mat-card-content>
        
        <mat-card-actions align="end">
            <button mat-flat-button *ngIf="enableReply" color="primary" (click)="replyToFeedback()">Reply</button>
            &NonBreakingSpace;
            <button mat-flat-button color="warn" (click)="closeDialog()">Close</button>
        </mat-card-actions>
    </mat-card>
</div>