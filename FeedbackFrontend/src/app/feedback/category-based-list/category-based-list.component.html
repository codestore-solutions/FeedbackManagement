<div class="category-wrapper">
    <div class="category" *ngFor="let category of categories?.response" (click)="setActiveCategory(category.id)"
        [ngClass]="{'selected':selectedCategory===category.id}">
        {{category.name}}
    </div>
</div>
<mat-progress-bar *ngIf="!selectedCategory" mode="indeterminate"></mat-progress-bar>
<div>
    <mat-progress-bar *ngIf="!categorySpecificEntitiesDataSource" mode="indeterminate"></mat-progress-bar>
    <app-no-data-available *ngIf="!categorySpecificEntitiesData?.response?.responseGroups?.length"></app-no-data-available>
    <div *ngIf="categorySpecificEntitiesData?.response?.responseGroups?.length">
        <table mat-table [dataSource]="categorySpecificEntitiesDataSource" class="mat-elevation-z2 feedback-table">
            <ng-container matColumnDef="serial">
                <th mat-header-cell *matHeaderCellDef>
                    <b>S.No.</b>
                </th>
                <td mat-cell *matCellDef="let element; let i = index;">
                    {{i+1}}
                </td>
            </ng-container>
            <ng-container matColumnDef="entityId">
                <th mat-header-cell *matHeaderCellDef>
                    <b>ID</b>
                </th>
                <td mat-cell *matCellDef="let element">
                    {{element.entityId}}
                    <!-- <div class="display-cell">
                        {{element.entityId}}
                    <img src="../../../assets/down-arrow.svg" alt="expand" class="grid-control" *ngIf="element.count" (click)="getFeedbacksListBasedOnEntity(element.entityId, categorySpecificEntitiesData.response.templateId)">
                    <img src="../../../assets/up-arrow.svg" alt="collapse" class="grid-control" *ngIf="element.count">
                    </div> -->
                </td>
            </ng-container>
            <ng-container matColumnDef="entityName">
                <th mat-header-cell *matHeaderCellDef>
                    <b>Name</b>
                </th>
                <td mat-cell *matCellDef="let element">
                    {{element.entityName}}
                </td>
            </ng-container>
            <ng-container matColumnDef="count">
                <th mat-header-cell *matHeaderCellDef>
                    <b>No. of feedbacks</b>
                </th>
                <td mat-cell *matCellDef="let element">
                    {{element.count}}
                </td>
            </ng-container>
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>
                    <b>Action</b>
                </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="primary" matTooltip="View All" routerLink="entity-feedbacks/{{element.entityId}}/{{categorySpecificEntitiesData.response.templateId}}">
                        <img src="../../../assets/eye.svg" alt="details">
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayEntityColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayEntityColumns;"></tr>
        </table>
    </div>
</div>
