<h3>Feedback Details</h3>

<mat-card>
    <mat-card-content>
        <div class="detail-element">
            <span>Feedback Response ID:</span>
            &NonBreakingSpace;
            <span class="bold">{{responseId}}</span>
        </div>
        <div class="wrapper" *ngIf="detailedFeedbackResponse && isLoaded">
            <div class="detail-element">
                <span>Customer Name:</span>
                &NonBreakingSpace;
                <span class="bold">{{authorName}}</span>
            </div>
            <div class="detail-element">
                <span>Entity Name:</span>
                &NonBreakingSpace;
                <span class="bold">{{entityName}}</span>
            </div>
        </div>

        <div class="main-wrapper" *ngIf="detailedFeedbackResponse && isLoaded">
            <div class="left-box">
                <div class="left-box-option" *ngFor="let section of detailedFeedbackResponse?.response?.templateResponse; let left_i = index;" (click)="handleCards(left_i)" [ngClass]="{'selected':left_i===currentIdx}">
                    <span class="bold">{{section.title}}</span>
                </div>
            </div>
            <div class="right-box">
                <div  *ngFor="let section of detailedFeedbackResponse?.response?.templateResponse; let right_i = index;">
                    <div *ngIf="right_i===currentIdx">
                        <div *ngFor="let qa of section?.questionAnswer;" class="space-adjustment">
                            <div>{{qa.question}}</div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='starrating'">
                                <img src="../../../assets/star.svg" alt="" class="icons" *ngIf="qa.answer">
                                {{qa.answer?qa.answer:"N/A"}}
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='numberrating'">
                                <app-number-rating [receivedNumberRating]="qa.answer" *ngIf="qa.answer"></app-number-rating>
                                <span *ngIf="!qa.answer">N/A</span>
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='emojirating'">
                                <app-emoji-rating [receivedEmojiRating]="qa.answer" *ngIf="qa.answer"></app-emoji-rating>
                                <span *ngIf="!qa.answer">N/A</span>
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='textarea'">
                                {{qa.answer?qa.answer:"N/A"}}
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='radio'">
                                {{qa.answer?qa.answer:"N/A"}}
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='checkbox'">
                                <div *ngIf="checkIfAnswerIsArray(qa.answer)">
                                    <div *ngFor="let ans of qa.answer">
                                        <span>- {{ans}}</span>
                                    </div>
                                </div>
                                <div *ngIf="!qa.answer" class="bold">
                                    <p>N/A</p>
                                </div>
                            </div>
                            <div class="bold" *ngIf="qa.answerFormat.type=='file'">
                                <div *ngIf="checkIfAnswerIsArray(qa.answer)">
                                    <span *ngFor="let img of qa.answer">
                                        <img src="{{img}}" alt="user-feedback-image" class="user-feedback-img" loading="lazy" (click)="openImagePrompt(img)" matTooltip="Click to see in Full View">
                                    </span>
                                </div>
                                <div *ngIf="!qa.answer" class="bold">
                                    <p>N/A</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="!isLoaded">
            <app-no-data-available [message]="'Failed to load the details'"></app-no-data-available>
        </div>

    </mat-card-content>

</mat-card>